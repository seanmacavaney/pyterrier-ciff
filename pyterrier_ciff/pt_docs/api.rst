``pyterrir_ciff`` API Documentation
=======================================

:class:`~pyterrier_ciff.CiffIndex` is the primary class for interacting with CIFF in PyTerrier.

.. autoclass:: pyterrier_ciff.CiffIndex
   :members:

.. autoclass:: pyterrier_ciff.CiffIndexer
   :members:

.. autofunction:: pyterrier_ciff.index

.. autofunction:: pyterrier_ciff.invert

Protobuf Bindings
----------------------------------------

The following classes are auto-generated by Protobuf and are returned by :class:`~pyterrier_ciff.CiffIndex`.

.. autoclass:: pyterrier_ciff.Header
   :members:
   
   A CIFF header, which provides metadata about the CIFF index.

   Attributes:
      - ``version`` (int): Version.
      - ``num_postings_lists`` (int): Exactly the number of PostingsList messages present in the CIFF index.
      - ``num_docs`` (int): Exactly the number of DocRecord messages present in the CIFF index.
      - ``total_postings_lists`` (int): The total number of postings lists in the collection, representing the vocabulary size. This might differ from `num_postings_lists` as it may only include postings lists of query terms.
      - ``total_docs`` (int): The total number of documents in the collection, which might differ from `num_docs` for reasons similar to the above.
      - ``total_terms_in_collection`` (int): The total number of terms across the entire collection, calculated as the sum of all document lengths.
      - ``average_doclength`` (float): The average length of documents in the collection, stored explicitly for a desired level of precision.
      - ``description`` (str): A human-readable description of this index, detailing aspects like the exporting application, document processing, and tokenization pipeline.


.. autoclass:: pyterrier_ciff.PostingsList
   :members:

   A CIFF postings list, which holds the postings and metadata for an individual term.

   Attributes:
      - **term** (*str*) -- The term.
      - **df** (*int*) -- The document frequency, representing the number of documents containing the term.
      - **cf** (*int*) -- The collection frequency, representing the total occurrences of the term across the collection.
      - **postings** (*List[* :class:`~pyterrier_ciff.Posting` *]*) -- A list of postings associated with the term.

.. autoclass:: pyterrier_ciff.Posting
   :members:

   A CIFF posting, which holds the term frequeny (or impact score) for a document.

   Attributes:
      - **docid** (*int*) -- The delta-gap compressed document ID.
      - **tf** (*int*) -- Term frequency within the document.

.. autoclass:: pyterrier_ciff.DocRecord
   :members:

   A CIFF document record, which holds information about a document.

   Attributes:
      - **docid** (*int*) -- Refers to the document ID in the postings lists.
      - **collection_docid** (*str*) -- Refers to a document ID in the external collection.
      - **doclength** (*int*) -- The length of the document.
